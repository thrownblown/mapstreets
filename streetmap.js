function initialize(){var e="toner";var t={center:center,zoom:14,mapTypeId:e,mapTypeControlOptions:{mapTypeIds:[e]},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]};map=new google.maps.Map(document.getElementById("map-canvas"),t);map.mapTypes.set(e,new google.maps.StamenMapType(e));userPoly=new google.maps.Polygon({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:3,fillColor:"#FF0000",fillOpacity:.35,editable:true});userPoly.setMap(map);userPoly.setPaths(path);google.maps.event.addListener(map,"click",addLatLng)}function buildTestArray(){var e=userPoly.getPaths().getArray()[0].j;for(var t=0;t<e.length;t++){testLat.push(e[t].k);testLing.push(e[t].A)}}function addLatLng(e){path.push(e.latLng);userPoly.setPaths(path)}function getCorners(){buildTestArray();var e={path:google.maps.SymbolPath.CIRCLE,fillColor:"red",fillOpacity:.8,scale:4,strokeColor:"black",strokeWeight:2};seCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.min(testLat),Array.max(testLing)),title:"seCorner",map:map,icon:e});neCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.max(testLat),Array.max(testLing)),title:"neCorner",map:map,icon:e});nwCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.max(testLat),Array.min(testLing)),title:"nwCorner",map:map,icon:e});swCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.min(testLat),Array.min(testLing)),title:"swCorner",map:map,icon:e})}function applyGrid(){var e=[];var t=Array.min(testLat);while(t<Array.max(testLat)){e.push(t);t+=5e-4}var n=[];var r=Array.min(testLing);while(r<Array.max(testLing)){n.push(r);r+=5e-4}for(var i=0;i<e.length;i++){for(var s=0;s<n.length;s++){var o=new google.maps.LatLng(e[i],n[s]);if(google.maps.geometry.poly.containsLocation(o,userPoly)){gridCoord.push(e[i].toString()+","+n[s].toString())}}}}function reverseGeo(){var e=gridCoord.length;for(var t=0;t<e;t++){var n=gridCoord[t];$.ajax({url:"http://www.mapquestapi.com/geocoding/v1/reverse?key=Fmjtd%7Cluub2g6bl1%2Cra%3Do5-9ual56",dataType:"jsonp",type:"POST",contentType:"json",data:{location:n},success:function(t){streets.push(t.results[0].locations[0].street);if(streets.length%50===0){streetSplit(streets)}if(streets.length===e){streetSplit(streets);$("#streets").prepend("<h2>COMPLETE</h2>")}}})}}function streetSplit(e){mem={};$("#streets tr").remove();for(var t=0;t<e.length;t++){var n=e[t].split(" ");var r=parseFloat(n.slice(0,1));if(n.length>2){streetName=n.slice(1).join(" ")}else if(n.length===2){if(n[1]==="Broadway"){streetName="Broadway"}else{streetName=e[t]}}if(r){if(streetName in mem){mem[streetName].push(r)}else{mem[streetName]=[];mem[streetName].push(r)}}}var i=[];for(var t in mem){i.push(t);i.sort();var s=Array.min(mem[t]);var o=Array.max(mem[t]);mem[t]=[s,o]}var u=i.length;for(t=0;t<u;t++){$("#streets table").append("<tr><td width=130>"+i[t]+"</td><td><strong> Min: </strong>"+mem[i[t]][0]+"</td><td><strong> Max: </strong>"+mem[i[t]][1]+"</td></tr>")}}function twoFer(){streets=[];getCorners();applyGrid();reverseGeo();$(".grid").remove();$("ul").append('<li><a href="#" class"applyGrid" onclick="streetSplit(streets);">Show Streets</a></li>')}function recenter(){var e=document.getElementById("city").value;var t=document.getElementById("state").value;var n=document.getElementById("zip").value;$.ajax({url:"http://www.mapquestapi.com/geocoding/v1/address?&key=Fmjtd%7Cluub2g6bl1%2Cra%3Do5-9ual56&location="+e+","+t+" "+n,dataType:"jsonp",type:"POST",contentType:"json",success:function(e){center=new google.maps.LatLng(e.results[0].locations[0].latLng.lat,e.results[0].locations[0].latLng.lng);initialize()}})}var map;var userPoly;var path=[];var gridCoord=[];var streets=[];var testLat=[];var testLing=[];var mem={};var seCorner;var neCorner;var swCorner;var nwCorner;var streetName;var center=new google.maps.LatLng(37.77870618798191,-122.428766746521);Array.max=function(e){return Math.max.apply(Math,e)};Array.min=function(e){return Math.min.apply(Math,e)};google.maps.event.addDomListener(window,"load",initialize)