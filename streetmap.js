function initialize(){var a="toner",b={center:new google.maps.LatLng(37.77870618798191,-122.428766746521),zoom:14,mapTypeId:a,mapTypeControlOptions:{mapTypeIds:[a]},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]};map=new google.maps.Map(document.getElementById("map-canvas"),b),map.mapTypes.set(a,new google.maps.StamenMapType(a)),userPoly=new google.maps.Polygon({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:3,fillColor:"#FF0000",fillOpacity:.35,editable:!0}),userPoly.setMap(map),userPoly.setPaths(path),google.maps.event.addListener(map,"click",addLatLng)}function buildTestArray(){for(var a=userPoly.getPaths().getArray()[0].j,b=0;b<a.length;b++)testLat.push(a[b].k),testLing.push(a[b].A)}function addLatLng(a){path.push(a.latLng),userPoly.setPaths(path)}function getCorners(){buildTestArray();var a={path:google.maps.SymbolPath.CIRCLE,fillColor:"red",fillOpacity:.8,scale:5,strokeColor:"black",strokeWeight:2};seCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.min(testLat),Array.max(testLing)),title:"seCorner",map:map,icon:a}),neCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.max(testLat),Array.max(testLing)),title:"neCorner",map:map,icon:a}),nwCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.max(testLat),Array.min(testLing)),title:"nwCorner",map:map,icon:a}),swCorner=new google.maps.Marker({position:new google.maps.LatLng(Array.min(testLat),Array.min(testLing)),title:"swCorner",map:map,icon:a})}function applyGrid(){for(var a=[],b=Array.min(testLat);b<Array.max(testLat);)a.push(b),b+=5e-4;for(var c=[],d=Array.min(testLing);d<Array.max(testLing);)c.push(d),d+=5e-4;for(var e=0;e<a.length;e++)for(var f=0;f<c.length;f++){var g=new google.maps.LatLng(a[e],c[f]);google.maps.geometry.poly.containsLocation(g,userPoly)&&gridCoord.push(a[e].toString()+","+c[f].toString())}}function reverseGeo(){for(var a=gridCoord.length,b=0;a>b;b++){var c=gridCoord[b];$.ajax({url:"http://www.mapquestapi.com/geocoding/v1/reverse?key=Fmjtd%7Cluub2g6bl1%2Cra%3Do5-9ual56",dataType:"jsonp",type:"POST",contentType:"json",data:{location:c},success:function(b){streets.push(b.results[0].locations[0].street),0===streets.length%50&&streetSplit(streets),streets.length===a&&(streetSplit(streets),$("#streets").prepend("<h2>COMPLETE</h2>"))}})}}function streetSplit(a){mem={},$("#streets tr").remove();for(var b=0;b<a.length;b++){var c=a[b].split(" "),d=parseFloat(c.slice(0,1));c.length>2?streetName=c.slice(1).join(" "):2===c.length&&(streetName="Broadway"===c[1]?"Broadway":a[b]),d&&(streetName in mem?mem[streetName].push(d):(mem[streetName]=[],mem[streetName].push(d)))}var e=[];for(var b in mem){e.push(b),e.sort();var f=Array.min(mem[b]),g=Array.max(mem[b]);mem[b]=[f,g]}var h=e.length;for(b=0;h>b;b++)$("#streets table").append("<tr><td width=130>"+e[b]+"</td><td><strong> Min: </strong>"+mem[e[b]][0]+"</td><td><strong> Max: </strong>"+mem[e[b]][1]+"</td></tr>")}function twoFer(){streets=[],getCorners(),applyGrid(),reverseGeo(),$(".grid").remove(),$("ul").append('<li><a href="#" class"applyGrid" onclick="streetSplit(streets);">Show Streets</a></li>')}var map,userPoly,path=[],gridCoord=[],streets=[],testLat=[],testLing=[],mem={},seCorner,neCorner,swCorner,nwCorner,streetName;Array.max=function(a){return Math.max.apply(Math,a)},Array.min=function(a){return Math.min.apply(Math,a)},google.maps.event.addDomListener(window,"load",initialize);